!function e(t,r,n){function s(i,u){if(!r[i]){if(!t[i]){var a="function"==typeof require&&require;if(!u&&a)return a(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[i]={exports:{}};t[i][0].call(f.exports,function(e){var r=t[i][1][e];return s(r||e)},f,f.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t){n(this,e);var r=t.method,s=t.url,o=t.headers,i=t.responseType,u=t.rawResponse;this.method=r,this.url=s,this.headers=o||null,this.responseType=i,this.rawResponse=u,this.progressHandlers=[],this.successHandlers=[],this.failureHandlers=[],this.request=new XMLHttpRequest,this.inject=null}return o(e,[{key:"isType",value:function(e,t){if((void 0===t?"undefined":s(t))===e)return!0;throw new Error("Expected type "+e+", instead got "+(void 0===t?"undefined":s(t)))}},{key:"inject",value:function(e){isType("function",e)&&(this.inject=e)}},{key:"addToHandlers",value:function(e,t){var r=this,n=this.isType;1===t.length&&n("function",t[0])&&this[e].push(t[0]),t.length>1&&t.forEach(function(t){n("function",t)&&r[e].push(t)})}},{key:"progress",value:function(e){return this.addToHandlers("progressHandlers",Array.from(arguments)),this}},{key:"success",value:function(e){return this.addToHandlers("successHandlers",Array.from(arguments)),this}},{key:"failure",value:function(e){return this.addToHandlers("failureHandlers",Array.from(arguments)),this}},{key:"setHeaders",value:function(){for(var e in headers)this.request.setRequestHeader(e,headers[e]);this.setFormHeaders()}},{key:"setFormHeader",value:function(){if("POST"===this.method||"PUT"===this.method){var e=headers["Content-Type"]||"application/x-www-form-urlencoded";this.request.setRequestHeader("Content-Type",e)}}},{key:"formatResponse",value:function(e){var t=e.target.responseText;return this.rawResponse?t:"json"===this.responseType?JSON.parse(t):"xml"===this.responseType?(new DOMParser).parseFromString(t,"text/xml"):void 0}},{key:"setEventHandlers",value:function(e,t){var r=this,n=void 0;return function(){r[t].length&&r.request.addEventListener(e,function(e){r[t].forEach(function(t){r.formatResponse(e);n=t(n||e,r.inject)})})}}},{key:"setProgressHandlers",value:function(){this.setEventHandlers("progress","progressHandlers")()}},{key:"setSuccessHandlers",value:function(){this.setEventHandlers("load","successHandlers")()}},{key:"setFailureHandlers",value:function(){this.setEventHandlers("error","failureHandlers")()}},{key:"setupListeners",value:function(){this.setProgressHandlers(),this.setSuccessHandlers(),this.setFailureHandlers()}},{key:"send",value:function(){this.setHeaders(),this.setupListeners(),this.request.send()}}]),e}();r.default=i},{}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(e("./async-request"));r.default=n.default},{"./async-request":1}]},{},[2]);